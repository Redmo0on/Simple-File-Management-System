<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Manager Notes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {}
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <style>
        body {
            font-family: 'Outfit', sans-serif;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .dark .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        .dark .note-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5), 0 8px 10px -6px rgba(0, 0, 0, 0.5);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 0.5);
            border-radius: 20px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background-color: rgba(156, 163, 175, 0.8);
        }
    </style>
</head>

<body
    class="bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-100 dark:from-slate-900 dark:via-slate-950 dark:to-slate-900 h-screen overflow-hidden flex text-slate-800 dark:text-slate-200 transition-colors duration-300">

    <div id="app" class="w-full flex h-full">
        <aside
            class="w-64 glass-panel flex flex-col h-full border-r border-white/40 dark:border-white/10 hidden md:flex transition-all duration-300">
            <div class="p-6 flex items-center gap-3">
                <div
                    class="w-8 h-8 rounded-lg bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center text-white shadow-lg shadow-blue-500/30">
                    <i class="fa-solid fa-folder-open"></i>
                </div>
                <h1
                    class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600">
                    CoolNotes</h1>
            </div>

            <nav class="flex-1 px-4 space-y-2 mt-4">
                <a href="#"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white/50 dark:bg-white/10 text-blue-600 dark:text-blue-400 font-medium shadow-sm ring-1 ring-black/5 dark:ring-white/10">
                    <i class="fa-solid fa-note-sticky"></i> All Notes
                </a>
                <a href="#"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-slate-400 hover:bg-white/40 dark:hover:bg-white/5 hover:text-slate-700 dark:hover:text-slate-200 transition-colors">
                    <i class="fa-regular fa-star"></i> Favorites (Demo)
                </a>
                <a href="#"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-slate-400 hover:bg-white/40 dark:hover:bg-white/5 hover:text-slate-700 dark:hover:text-slate-200 transition-colors">
                    <i class="fa-regular fa-trash-can"></i> Trash (Demo)
                </a>
            </nav>

            <div class="p-4">
                <div
                    class="p-4 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-500/25">
                    <p class="text-xs font-medium text-blue-100 mb-1">Storage</p>
                    <div class="w-full h-1.5 bg-blue-900/20 rounded-full overflow-hidden mb-2">
                        <div class="h-full bg-white/90 w-3/4 rounded-full"></div>
                    </div>
                    <p class="text-xs text-blue-100">75% Used</p>
                </div>
            </div>
        </aside>

        <main class="flex-1 flex flex-col h-full overflow-hidden relative">
            <header
                class="h-16 flex items-center justify-between px-8 bg-white/30 dark:bg-slate-900/30 backdrop-blur-sm border-b border-white/40 dark:border-white/10 transition-colors duration-300">
                <div class="flex items-center gap-4">
                    <div class="md:hidden text-slate-500 dark:text-slate-400">
                        <i class="fa-solid fa-bars text-xl"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-slate-800 dark:text-white">My Notes</h2>
                    <span
                        class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300">{{
                        notes.length }} items</span>
                </div>

                <div class="flex items-center gap-4">
                    <button @click="toggleDarkMode"
                        class="w-10 h-10 rounded-xl bg-white/50 dark:bg-white/10 text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-white/20 shadow-sm transition-all flex items-center justify-center">
                        <i v-if="darkMode" class="fa-solid fa-sun text-yellow-400"></i>
                        <i v-else class="fa-solid fa-moon text-slate-600"></i>
                    </button>

                    <button @click="openCreateModal"
                        class="flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-lg shadow-blue-600/20 transition-all active:scale-95">
                        <i class="fa-solid fa-plus"></i>
                        <span class="font-medium hidden sm:inline">New Note</span>
                        <span class="sm:hidden"><i class="fa-solid fa-plus"></i></span>
                    </button>
                </div>
            </header>

            <div class="flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar">

                <div v-if="loading" class="flex justify-center items-center h-64">
                    <i class="fa-solid fa-spinner fa-spin text-3xl text-blue-500"></i>
                </div>

                <div v-if="!loading && notes.length === 0"
                    class="flex flex-col items-center justify-center h-full text-slate-400 dark:text-slate-500">
                    <div
                        class="w-24 h-24 bg-white/50 dark:bg-white/5 rounded-full flex items-center justify-center mb-4 shadow-sm">
                        <i class="fa-regular fa-file-lines text-4xl text-slate-300 dark:text-slate-600"></i>
                    </div>
                    <p class="text-lg">No notes yet. Create one!</p>
                </div>

                <div v-else class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6">
                    <div v-for="note in notes" :key="note.id"
                        class="note-card bg-white/80 dark:bg-slate-800/80 group p-5 rounded-2xl border border-white/60 dark:border-white/5 shadow-sm transition-all duration-300 flex flex-col h-56 relative overflow-hidden animate__animated animate__fadeInUp">

                        <div
                            class="absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                            <button @click.stop="openEditModal(note)"
                                class="w-8 h-8 rounded-full bg-white dark:bg-slate-700 shadow text-slate-500 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 hover:scale-110 transition-all flex items-center justify-center">
                                <i class="fa-solid fa-pen text-xs"></i>
                            </button>
                            <button @click.stop="confirmDelete(note)"
                                class="w-8 h-8 rounded-full bg-white dark:bg-slate-700 shadow text-slate-500 dark:text-slate-300 hover:text-red-500 dark:hover:text-red-400 hover:scale-110 transition-all flex items-center justify-center">
                                <i class="fa-solid fa-trash text-xs"></i>
                            </button>
                        </div>

                        <div class="mb-3">
                            <div
                                class="w-10 h-10 rounded-xl bg-orange-50 dark:bg-orange-900/20 text-orange-500 dark:text-orange-400 flex items-center justify-center mb-3">
                                <i class="fa-regular fa-file-lines"></i>
                            </div>
                            <h3 class="font-bold text-slate-800 dark:text-slate-100 text-lg line-clamp-1">{{ note.title
                                }}</h3>
                            <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">{{ formatDate(note.created_at) }}
                            </p>
                        </div>

                        <p class="text-slate-500 dark:text-slate-400 text-sm line-clamp-3 leading-relaxed">
                            {{ note.content }}
                        </p>
                    </div>
                </div>
            </div>
        </main>

        <div v-if="showModal"
            class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 dark:bg-black/60 backdrop-blur-sm animate__animated animate__fadeIn">
            <div
                class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate__animated animate__zoomIn animate__faster border border-white/10">
                <div class="p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center">
                    <h3 class="text-xl font-bold text-slate-800 dark:text-white">{{ isEditing ? 'Edit Note' : 'New Note'
                        }}</h3>
                    <button @click="closeModal"
                        class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                </div>
                <div class="p-6 space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Title</label>
                        <input v-model="form.title" type="text" placeholder="Project Plan..."
                            class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-900/50 border-transparent dark:border-white/5 focus:bg-white dark:focus:bg-slate-900 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all placeholder-slate-400 dark:text-white text-slate-700">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Content</label>
                        <textarea v-model="form.content" rows="4" placeholder="Write something amazing..."
                            class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-900/50 border-transparent dark:border-white/5 focus:bg-white dark:focus:bg-slate-900 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all placeholder-slate-400 dark:text-white text-slate-700 resize-none"></textarea>
                    </div>
                </div>
                <div class="p-4 bg-slate-50 dark:bg-slate-900/30 flex justify-end gap-3">
                    <button @click="closeModal"
                        class="px-5 py-2.5 rounded-xl text-slate-600 dark:text-slate-400 font-medium hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">Cancel</button>
                    <button @click="saveNote" :disabled="!form.title || !form.content"
                        class="px-6 py-2.5 rounded-xl bg-blue-600 text-white font-medium shadow-lg shadow-blue-500/30 hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                        {{ isEditing ? 'Save Changes' : 'Create Note' }}
                    </button>
                </div>
            </div>
        </div>

        <div v-if="showDeleteModal"
            class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 dark:bg-black/60 backdrop-blur-sm animate__animated animate__fadeIn">
            <div
                class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate__animated animate__shakeX border border-white/10">
                <div class="p-6 text-center">
                    <div
                        class="w-16 h-16 rounded-full bg-red-50 dark:bg-red-900/20 text-red-500 flex items-center justify-center mx-auto mb-4">
                        <i class="fa-solid fa-trash-can text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800 dark:text-white mb-2">Delete this note?</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm">This action cannot be undone. Are you sure you
                        want to delete "{{ noteToDelete?.title }}"?</p>
                </div>
                <div class="p-4 bg-slate-50 dark:bg-slate-900/30 flex gap-3">
                    <button @click="showDeleteModal = false"
                        class="flex-1 py-2.5 rounded-xl text-slate-600 dark:text-slate-400 font-medium hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">Cancel</button>
                    <button @click="deleteNote"
                        class="flex-1 py-2.5 rounded-xl bg-red-500 text-white font-medium shadow-lg shadow-red-500/30 hover:bg-red-600 transition-all">Delete</button>
                </div>
            </div>
        </div>

    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="/static/js/app.js"></script>
</body>

</html>